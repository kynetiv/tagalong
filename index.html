<!DOCTYPE html>
<html lang="en">
  <head>
    <style>
      textarea {
        display: block;
        font-family: monospace;
        width: 100%;
        min-height: 5em;
      }

      #output {
        border: 1px solid red;
      }

    </style>
    <script src="tagalong.js"></script>
  </head>
  <body>
    <form id="example1">
      <textarea id="input-html">&lt;div id="template"&gt;
  &lt;h1 t-with="items"&gt;
    &lt;b t-text="length"&gt;0&lt;/b&gt;
    item&lt;s t-if="length !== 1"&gt;s&lt;/s&gt;
  &lt;/h1&gt;
  &lt;ul t-foreach="items"&gt;
    &lt;li&gt;a-o, &lt;b t-text="name"&gt;river&lt;/b&gt;!&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;</textarea>

      <textarea id="input-js">tagalong.render('#template', {
  items: [
    {name: 'foo', size: 100},
    {name: 'bar', size: 200},
    {name: 'baz', size: 50}
  ]
});</textarea>

      <p><input type="submit" value="Render!"> (took <span id="timer">0ms</span>)</p>

      <div id="output"></div>
    </form>
  </body>
  <script>
  (function() {

    var form = document.querySelector('form');
    var inputHTML = form.querySelector('#input-html');
    var inputJS = form.querySelector('#input-js');
    var output = form.querySelector('#output');
    var timer = form.querySelector('#timer');

    form.addEventListener('submit', function(event) {
      event.preventDefault();
      render();
      return false;
    });

    render();

    function render() {
      output.innerHTML = inputHTML.value;
      var then = Date.now();
      eval(inputJS.value);
      var elapsed = Date.now() - then;
      timer.textContent = elapsed.toFixed(1) + 'ms';
    }

  })();
  </script>
</html>
